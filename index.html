<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ›’ Grocery List</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div class="container">
    <h1>ðŸ›’ Grocery List</h1>
    <div class="table-section">
      <table id="grocery">
        <thead><tr><th>Grocery</th></tr></thead>
        <tbody></tbody>
      </table>
      <table id="veggies">
        <thead><tr><th>Veggies</th></tr></thead>
        <tbody></tbody>
      </table>
      <table id="indian">
        <thead><tr><th>Indian Store</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <button id="toggleAll" title="Check/Uncheck All">âœ”</button>

  <script>
    const defaultData = {
      grocery: [
        "à¤•à¥‡à¤²à¥‡", "Chicken Ng.", "à¤²à¤¾à¤² à¤¸à¥‡à¤¬", "à¤¹à¤°à¥‡ à¤¸à¥‡à¤¬", "Dish. Ringe.", "Pears",
        "Dish Tablets", "Avocado", "Dish. Liquid", "à¤¸à¤‚à¤¤à¤°à¥‡ for à¤œà¥‚à¤¸", "Woolwash",
        "à¤¸à¤‚à¤¤à¤°à¥‡ (Kunal)", "Pre-wash", "à¤…à¤‚à¤—à¥‚à¤°", "Detergent", "à¤—à¤¾à¤œà¤°", "Bin bags",
        "à¤ªà¥à¤¯à¤¾à¤œ", "Beetroot", "Potato", "Chicken", "Kids Snack", "Sugar",
        "Hard Butter", "Eggs", "Pizza Cheese", "Bread", "Soft Butter",
        "Pizza Base", "Full Cr. Milk", "Buns", "Coconut", "Yakult"
      ],
      veggies: [
        "à¤Ÿà¤®à¤¾à¤Ÿà¤°", "à¤–à¥€à¤°à¤¾", "à¤­à¤¿à¤‚à¤¡à¥€", "à¤¶à¤¿à¤®à¤²à¤¾ à¤®à¤¿à¤°à¥à¤š", "à¤¨à¥€à¤‚à¤¬à¥‚", "à¤²à¥‹à¤•à¥€", "à¤…à¤¦à¤°à¤•", "à¤²à¤¹à¤¸à¥à¤¨",
        "à¤ªà¤¾à¤²à¤•", "Beans", "à¤¹à¤°à¤¾ à¤§à¤¨à¤¿à¤¯à¤¾", "Broccoli", "à¤ªà¥à¤¦à¥€à¤¨à¤¾", "Corn", "à¤®à¥‡à¤¥à¥€",
        "à¤ªà¤ªà¥€à¤¤à¤¾", "à¤¬à¥ˆà¤‚à¤—à¤¨", "Kiwi", "à¤•à¤¦à¥à¤¦à¥‚", "à¤¶à¤•à¤°à¤•à¤‚à¤¦à¥€", "à¤¤à¤°à¤¬à¥‚à¤œ", "à¤ªà¥à¤¯à¤¾à¤œ"
      ],
      indian: [
        "à¤†à¤Ÿà¤¾", "à¤°à¤¾à¤ˆ", "à¤šà¤¾à¤µà¤²", "à¤¦à¤²à¤¿à¤¯à¤¾", "à¤ªà¥‹à¤¹à¤¾", "à¤¬à¥‡à¤¸à¤¨", "à¤¦à¤¾à¤²", "à¤¸à¤°à¤¸à¥‹à¤‚ à¤¤à¥‡à¤²"
      ]
    };

    function loadData(tableId, items) {
      const saved = JSON.parse(localStorage.getItem(tableId) || 'null');
      const list = saved || items.map(text => ({ text, count: 1, done: false }));
      const tbody = document.querySelector(`#${tableId} tbody`);
      tbody.innerHTML = '';
      list.forEach(item => addRow(tableId, item.text, item.count, item.done));
    }

    function addRow(tableId, text = '', count = 1, done = false) {
      const tbody = document.querySelector(`#${tableId} tbody`);
      const tr = document.createElement('tr');
      if (done) tr.classList.add('completed');

      const td = document.createElement('td');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = done;
      checkbox.addEventListener('change', () => {
        tr.classList.toggle('completed', checkbox.checked);
        saveTable(tableId);
      });

      const counter = document.createElement('div');
      counter.className = 'counter';

      const minus = document.createElement('button');
      minus.textContent = 'âˆ’';
      minus.onclick = () => {
        if (input.value > 1) input.value--;
        saveTable(tableId);
      };

      const input = document.createElement('input');
      input.type = 'number';
      input.min = '1';
      input.max = '50';
      input.value = count;
      input.className = 'count-input';
      input.addEventListener('input', () => saveTable(tableId));

      const plus = document.createElement('button');
      plus.textContent = '+';
      plus.onclick = () => {
        if (input.value < 50) input.value++;
        saveTable(tableId);
      };

      counter.append(minus, input, plus);

      const editable = document.createElement('input');
      editable.type = 'text';
      editable.value = text;
      editable.addEventListener('input', () => saveTable(tableId));
      editable.addEventListener('keydown', e => {
        if (e.key === 'Enter' && editable.value.trim() && tr.nextSibling === null) {
          addRow(tableId);
          setTimeout(() => {
            tr.nextSibling.querySelector('input[type=text]').focus();
          }, 100);
        }
      });

      const del = document.createElement('button');
      del.className = 'delete-row';
      del.textContent = 'Ã—';
      del.onclick = () => {
        if (confirm('Delete this item?')) {
          tr.remove();
          saveTable(tableId);
        }
      };

      td.append(checkbox, counter, editable, del);
      tr.appendChild(td);
      tbody.appendChild(tr);
    }

    function saveTable(tableId) {
      const rows = document.querySelectorAll(`#${tableId} tbody tr`);
      const data = Array.from(rows).map(tr => {
        const inputs = tr.querySelectorAll('input');
        return {
          text: inputs[2].value,
          count: parseInt(inputs[1].value),
          done: inputs[0].checked
        };
      });
      localStorage.setItem(tableId, JSON.stringify(data));
    }

    ["grocery", "veggies", "indian"].forEach(id => loadData(id, defaultData[id]));

    document.getElementById('toggleAll').addEventListener('click', () => {
      if (!confirm("Are you sure you want to check/uncheck all?")) return;
      const all = document.querySelectorAll('tbody input[type=checkbox]');
      const anyUnchecked = Array.from(all).some(cb => !cb.checked);
      all.forEach(cb => {
        cb.checked = anyUnchecked;
        cb.dispatchEvent(new Event('change'));
      });
    });
  </script>
</body>
</html>
