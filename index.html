<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>My Grocery Lists</title>

  <!-- Default lists: one item per line -->
  <script>
    const defaultVeggiesText = `
‡§ü‡§Æ‡§æ‡§ü‡§∞
Avocado
Pears
‡§Ö‡§¶‡§∞‡§ï
‡§ï‡§¶‡•ç‡§¶‡•Ç
‡§ï‡•á‡§≤‡•á
‡§®‡•Ä‡§Ç‡§¨‡•Ç
‡§™‡§æ‡§≤‡§ï
‡§™‡•Å‡§¶‡•Ä‡§®‡§æ
‡§™‡•ç‡§Ø‡§æ‡§ú
‡§¨‡•à‡§Ç‡§ó‡§®
‡§≠‡§ø‡§Ç‡§°‡•Ä
‡§Æ‡•á‡§•‡•Ä
‡§≤‡§æ‡§≤ ‡§∏‡•á‡§¨
‡§∂‡§ï‡§∞‡§ï‡§Ç‡§¶‡•Ä
‡§π‡§∞‡§æ ‡§ß‡§®‡§ø‡§Ø‡§æ
‡§π‡§∞‡•á ‡§∏‡•á‡§¨
‡§ñ‡•Ä‡§∞‡§æ
Avocado
Beans
Beetroot
Broccoli
Corn
Kiwi
‡§Ö‡§Ç‡§ó‡•Ç‡§∞
‡§ó‡§æ‡§ú‡§∞
‡§§‡§∞‡§¨‡•Ç‡§ú
‡§™‡§™‡•Ä‡§§‡§æ
‡§™‡•ç‡§Ø‡§æ‡§ú
‡§≤‡§π‡§∏‡•Å‡§®
‡§≤‡•ã‡§ï‡•Ä
‡§∂‡§ø‡§Æ‡§≤‡§æ ‡§Æ‡§ø‡§∞‡•ç‡§ö
‡§∏‡§Ç‡§§‡§∞‡•á (Kunal)
‡§∏‡§Ç‡§§‡§∞‡•á for ‡§ú‡•Ç‡§∏`.trim();

    const defaultGroceryText = `
Bin bags
Bread
Buns
Chicken
Chicken Ng.
Detergent
Dish Tablets
Dish. Liquid
Dish. Ringe.
Eggs
Full Cr. Milk
Hard Butter
Kids Snack
Pizza Base
Pizza Cheese
Potato
Pre-wash
Soft Butter
Sugar
Woolwash`.trim();

    const defaultIndianText = `
‡§Ü‡§ü‡§æ
‡§ö‡§æ‡§µ‡§≤
‡§™‡•ã‡§π‡§æ
‡§¶‡§æ‡§≤:
‡§∞‡§æ‡§à
‡§¶‡§≤‡§ø‡§Ø‡§æ
‡§¨‡•á‡§∏‡§®
‡§∏‡§∞‡§∏‡•ã‡§Ç ‡§§‡•á‡§≤`.trim();

    const defaultOthersText = `
Bunnings
Kmart
BigW`.trim();
  </script>

  <style>
    :root {
      --veg:#4caf50; --gro:#2196f3; --ind:#ff9800;
      --oth:#9c27b0; /* color for Others */
      --check:#e9ecef;
      --btn2:#f44336; --btn3:#4caf50; --btn4:#ff5722;
      --h:#fff9c4;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{font:21.6px 'Segoe UI',sans-serif;background:#f5f7fa;
      padding:70px 15px 80px;touch-action:pan-y;}
    h1{text-align:center;margin-bottom:25px;font-size:2.16rem;color:#333}
    .actions{position:absolute;top:15px;left:15px;right:15px;
      display:flex;gap:12px;justify-content:space-between;overflow-x:auto}
    .actions::-webkit-scrollbar{display:none}
    .actions button{flex:1 1 auto;padding:.6em 1em;display:flex;
      align-items:center;justify-content:center;gap:.3em;border:none;
      border-radius:8px;color:#fff;font-size:1rem;white-space:nowrap;cursor:pointer}
    .reset-btn{background:var(--btn2)}.share-btn{background:var(--btn3)}.reorder-btn{background:var(--btn4)}
    .container{margin-bottom:30px;background:#fff;border-radius:8px;
      box-shadow:0 4px 12px rgba(0,0,0,0.05)}
    .header{display:flex;justify-content:space-between;
      align-items:center;padding:12px;font-size:1.4rem;font-weight:bold;color:#fff;
      cursor:pointer}
    #veggies-header{background:var(--veg)}#grocery-header{background:var(--gro)}
    #indian-header{background:var(--ind)}#others-header{background:var(--oth)}
    .collapse-btn{width:28px;height:28px;background:rgba(255,255,255,0.3);
      border:none;border-radius:50%;display:flex;align-items:center;
      justify-content:center;font-size:1.2rem;color:#fff;transition:transform .2s}
    .collapse-btn.collapsed{transform:rotate(-90deg)}
    ul{list-style:none;padding:0;margin:0}
    li{display:flex;align-items:center;gap:8px;padding:10px;
      border-bottom:1px solid #eee;background:#fff;transition:background .3s}
    li.checked{background:var(--check);color:#666}
    li.checked .name{text-decoration:line-through;opacity:.7}
    input[type=checkbox]{width:28px;height:28px;cursor:pointer}
    .name{flex:1;min-width:0;font-size:1.6rem;border:none;
      background:transparent;overflow:hidden;text-overflow:ellipsis;
      white-space:nowrap;transition:background .3s,font-weight .3s}
    .name.active{background:var(--h);font-weight:bold;border-radius:4px}
    .counter{display:flex;align-items:center;gap:6px;transition:background .3s}
    .counter.active{background:var(--h);border-radius:20px;padding:2px 6px}
    .counter.active .count{font-weight:bold;color:#000}
    .counter button{width:30px;height:30px;border:none;border-radius:50%;
      color:#fff;font-size:1.2rem;cursor:pointer}
    .counter span.count{min-width:24px;text-align:center;font-size:1.2rem}
    .add-btn{width:36px;height:36px;margin:8px;border-radius:50%;
      background:var(--btn1);color:#fff;font-size:1.5rem;cursor:pointer}
    @media(max-width:600px){.name{font-size:1.4rem}.counter button{width:28px;height:28px}
      .counter span.count{font-size:1rem}.add-btn{width:32px;height:32px;font-size:1.2rem}}
  </style>
</head>
<body>
  <div class="actions">
    <button class="reset-btn" onclick="resetAll()">üîÑ Reset</button>
    <button class="share-btn" onclick="shareList()">‚§¥ Share</button>
    <button class="reorder-btn" onclick="reorderAll()">üõí Reorder</button>
  </div>
  <h1>My Grocery Lists</h1>

  <!-- Veggies -->
  <div class="container">
    <div id="veggies-header" class="header" onclick="toggle('veggies')">
      Veggies <button class="collapse-btn"></button>
    </div>
    <ul id="veggies"></ul>
    <div style="text-align:right"><span class="add-btn" onclick="addItem('veggies')">Ôºã</span></div>
  </div>
  <!-- Grocery -->
  <div class="container">
    <div id="grocery-header" class="header" onclick="toggle('grocery')">
      Grocery <button class="collapse-btn"></button>
    </div>
    <ul id="grocery"></ul>
    <div style="text-align:right"><span class="add-btn" onclick="addItem('grocery')">Ôºã</span></div>
  </div>
  <!-- Indian -->
  <div class="container">
    <div id="indian-header" class="header" onclick="toggle('indian')">
      Indian Store <button class="collapse-btn"></button>
    </div>
    <ul id="indian"></ul>
    <div style="text-align:right"><span class="add-btn" onclick="addItem('indian')">Ôºã</span></div>
  </div>
  <!-- Others -->
  <div class="container">
    <div id="others-header" class="header" onclick="toggle('others')">
      Others <button class="collapse-btn"></button>
    </div>
    <ul id="others"></ul>
    <div style="text-align:right"><span class="add-btn" onclick="addItem('others')">Ôºã</span></div>
  </div>

  <script>
    const lists={
      veggies:{el:'veggies',hdr:'veggies-header',def:defaultVeggiesText.split(/\r?\n/),color:'veg'},
      grocery:{el:'grocery',hdr:'grocery-header',def:defaultGroceryText.split(/\r?\n/),color:'gro'},
      indian:{el:'indian',hdr:'indian-header',def:defaultIndianText.split(/\r?\n/),color:'ind'},
      others:{el:'others',hdr:'others-header',def:defaultOthersText.split(/\r?\n/),color:'oth'}
    };

    document.addEventListener('DOMContentLoaded',()=>{
      for(let k in lists){
        // seed only if no data
        if(localStorage.getItem(k)===null){
          localStorage.setItem(k,JSON.stringify(
            lists[k].def.map(n=>({name:n,count:0,checked:false}))
          ));
        }
        load(k); restore(k);
      }
    });

    function load(key){
      const arr=JSON.parse(localStorage.getItem(key)), ul=document.getElementById(key);
      ul.innerHTML='';
      arr.forEach((it,i)=>{
        const li=document.createElement('li');
        li.innerHTML=
          `<input type="checkbox" ${it.checked?'checked':''}
            onchange="rowToggle('${key}',${i},this.checked)">
           <input class="name" value="${it.name.replace(/"/g,'&quot;')}" 
            oninput="editName('${key}',${i},this.value)">
           <div class="counter">
             <button onclick="change('${key}',${i},-1)">-</button>
             <span class="count">${it.count}</span>
             <button onclick="change('${key}',${i},1)">+</button>
           </div>`;
        if(it.checked) li.classList.add('checked');
        if(it.count>0){
          li.querySelector('.name').classList.add('active');
          li.querySelector('.counter').classList.add('active');
          li.querySelector('.count').classList.add('count');
        }
        ul.appendChild(li);
      });
    }
    function save(key,arr){localStorage.setItem(key,JSON.stringify(arr));}
    function rowToggle(k,i,v){
      const a=JSON.parse(localStorage.getItem(k)); a[i].checked=v; save(k,a); load(k);
    }
    function editName(k,i,v){const a=JSON.parse(localStorage.getItem(k)); a[i].name=v; save(k,a)}
    function change(k,i,d){
      const a=JSON.parse(localStorage.getItem(k));
      let v=a[i].count+d; v=Math.max(0,Math.min(50,v));
      a[i].count=v; save(k,a); load(k);
    }
    function restore(key){
      const st=localStorage.getItem(key+'-col')==='true',ul=document.getElementById(key),btn=document.getElementById(lists[key].hdr).querySelector('button');
      if(st){ul.style.display='none';btn.classList.add('collapsed');}
    }
    function toggle(key){
      const ul=document.getElementById(key),btn=document.getElementById(lists[key].hdr).querySelector('button');
      const hide=ul.style.display!=='none'; ul.style.display=hide?'none':'block';
      btn.classList.toggle('collapsed',hide);
      localStorage.setItem(key+'-col',hide);
    }
    function resetAll(){if(!confirm('Reset all?'))return;
      for(let k in lists){
        const a=lists[k].def.map(n=>({name:n,count:0,checked:false})); save(k,a); load(k);
        localStorage.removeItem(k+'-col'); restore(k);
      }}
    function shareList(){let t='';for(let k in lists){
      const a=JSON.parse(localStorage.getItem(k)).filter(x=>x.count>0);
      if(a.length)t+=k.toUpperCase()+':\n'+a.map(x=>`${x.name} (${x.count})`).join('\n')+'\n\n';}
      t=t.trim();if(!t)return alert('Nothing to share');navigator.share?navigator.share({text:t}):prompt('Copy',t);
    }
    function reorderAll(){for(let k in lists){
      const a=JSON.parse(localStorage.getItem(k)),h=a.filter(x=>x.count>0),z=a.filter(x=>x.count===0);
      z.forEach(x=>x.checked=true);const o=h.concat(z);save(k,o);load(k);} }
    function addItem(key){
      const a=JSON.parse(localStorage.getItem(key));a.push({name:'',count:0,checked:false});save(key,a);load(key);
    }
  </script>
</body>
</html>
